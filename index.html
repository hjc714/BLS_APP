<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLS åŸºæœ¬æ•‘å‘½è¡“å­¸ç¿’ APP</title>
    <style>
        :root { --primary: #e63946; --secondary: #457b9d; --accent: #1d3557; --bg: #f1faee; --text: #333; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { max-width: 600px; width: 100%; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1, h2, h3 { text-align: center; color: var(--accent); margin-top: 0; }
        h1 { font-size: 1.6rem; color: var(--primary); }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        .btn { display: block; width: 100%; padding: 16px; margin: 12px 0; border: none; border-radius: 12px; font-size: 1.1rem; cursor: pointer; transition: 0.2s; background: var(--secondary); color: white; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn:active { transform: scale(0.98); }
        .btn-home { background: #6c757d; }
        .btn-learn { background: #2a9d8f; } /* å­¸ç¿’å€é¡è‰² */
        
        /* é¸é …æŒ‰éˆ• */
        .btn-option { background: #f8f9fa; color: #333; border: 2px solid #e9ecef; text-align: left; font-weight: normal; }
        .btn-option:hover { border-color: var(--secondary); }
        .btn-option.correct { background: #d4edda; border-color: #28a745; color: #155724; }
        .btn-option.wrong { background: #f8d7da; border-color: #dc3545; color: #721c24; }
        
        /* å­¸ç¿’å€æ¨£å¼ */
        .learning-content { text-align: left; line-height: 1.6; }
        .learning-card { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid var(--secondary); }
        .learning-card h3 { text-align: left; color: var(--secondary); margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 5px; font-size: 1.2rem; }
        .highlight { color: #d62828; font-weight: bold; background: #fff3cd; padding: 0 4px; border-radius: 4px; }
        .sub-title { font-weight: bold; color: var(--accent); margin-top: 10px; display: block; }
        ul, ol { padding-left: 20px; margin: 5px 0; }
        li { margin-bottom: 6px; }

        /* è¡¨æ ¼æ¨£å¼ */
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        .comparison-table th, .comparison-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        .comparison-table th { background-color: var(--secondary); color: white; }
        .comparison-table tr:nth-child(even) { background-color: #f2f2f2; }

        /* é€šç”¨ */
        .hidden { display: none; }
        #explanation { margin-top: 15px; padding: 15px; background: #e9ecef; border-radius: 8px; font-size: 0.95rem; line-height: 1.5; border-left: 4px solid var(--accent); }
        .progress-bar { width: 100%; height: 10px; background: #e9ecef; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--secondary); width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

<div class="container" id="home-screen">
    <h1>ğŸš‘ BLS åŸºæœ¬æ•‘å‘½è¡“<br>è¡Œå‹•å­¸ç¿’ç«™</h1>
    <p style="text-align: center; color: #666;">2020å¹´ç‰ˆæŒ‡å¼•é‡é»æ•™æ</p>
    
    <button class="btn btn-learn" onclick="showScreen('learning-screen')">ğŸ“– å­¸ç¿’é‡é»æ­¸ç´ (äº”å¤§é ˜åŸŸ)</button>
    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
    <button class="btn" onclick="startQuiz('unit1')">ğŸ“ å–®å…ƒä¸€ï¼šåŸºç¤è§€å¿µèˆ‡ CPR</button>
    <button class="btn" onclick="startQuiz('unit2')">âš¡ å–®å…ƒäºŒï¼šAED èˆ‡ ç•°ç‰©æ¢—å¡</button>
</div>

<div class="container hidden" id="learning-screen">
    <h2>ğŸ“– BLS å­¸ç¿’é‡é»æ­¸ç´</h2>
    <div class="learning-content">
        
        <div class="learning-card">
            <h3>1. ç”Ÿå­˜ä¹‹éˆ (Chain of Survival)</h3>
            <p>æ€¥æ•‘æˆåŠŸçš„åŸºç¤ï¼Œ2020å¹´ç‰ˆæ–°å¢ç¬¬å…­ç’°ã€‚</p>
            <span class="sub-title">æˆäººé™¢å¤–å¿ƒè·³åœæ­¢ (OHCA) é †åº [cite: 9, 15]ï¼š</span>
            <ol>
                <li>æ—©æœŸæ±‚æ•‘</li>
                <li>æ—©æœŸé«˜å“è³ª CPR</li>
                <li>æ—©æœŸé›»æ“Šå»é¡«</li>
                <li>æ—©æœŸé«˜ç´šå¿ƒè‡Ÿæ•‘å‘½è¡“</li>
                <li>æ•´åˆä¹‹å¿ƒè‡Ÿåœæ­¢å¾Œç…§è­·</li>
                <li><span class="highlight">å¾©åŸ (Recovery)</span></li>
            </ol>
            <p><strong>ã€Œå¾©åŸã€å®šç¾© [cite: 36, 37]ï¼š</strong>åŒ…å«å°å­˜æ´»è€…çš„èº«é«”ã€ç¥ç¶“ã€å¿ƒè‚ºåŠŸèƒ½åŠèªçŸ¥å¤±èƒ½çš„è©•ä¼°ï¼Œä»¥åŠåŒ…å«ç…§è­·è€…åœ¨å…§çš„å¤šæ–¹ä½å‡ºé™¢èˆ‡å¾©å¥è¨ˆç•«ã€‚</p>
            
            <span class="sub-title">æ±‚æ•‘æ™‚æ©Ÿ (å–®äººæ–½æ•‘è€…) [cite: 56-59]ï¼š</span>
            <ul>
                <li><strong>ä¸€èˆ¬ç‹€æ³</strong>ï¼šå…ˆæ±‚æ•‘ã€æ‹¿AEDï¼Œå†å›ä¾†åšCPRã€‚</li>
                <li><strong>å…ˆæ€¥æ•‘å†æ±‚æ•‘ (Call Fast)</strong>ï¼šè‹¥æ˜¯<span class="highlight">æººæ°´ã€è—¥ç‰©ä¸­æ¯’ã€å‰µå‚·æˆ–å°å…’</span>ï¼ˆè¦–ç‚ºå‘¼å¸é“å•é¡Œå°è‡´ï¼‰ï¼Œæ‡‰å…ˆåŸ·è¡Œ <span class="highlight">2åˆ†é˜ CPR</span> å†å»æ±‚æ•‘ã€‚</li>
            </ul>
        </div>

        <div class="learning-card">
            <h3>2. é«˜å“è³ª CPR æ“ä½œè¦é»</h3>
            <p>æŒ‰å£“è³ªé‡æ˜¯æ•‘å‘½é—œéµ [cite: 3, 27]ã€‚</p>
            <ul>
                <li><strong>æŒ‰å£“é€Ÿç‡</strong>ï¼šæ¯åˆ†é˜ <span class="highlight">100-120 æ¬¡</span> [cite: 24, 77]ã€‚</li>
                <li><strong>æŒ‰å£“æ·±åº¦</strong>ï¼š
                    <ul>
                        <li>æˆäººï¼š<span class="highlight">5-6 å…¬åˆ†</span> [cite: 28]ã€‚</li>
                        <li>å…’ç«¥ï¼š5å…¬åˆ† æˆ– èƒ¸å»“åšåº¦ 1/3 [cite: 29]ã€‚</li>
                        <li>å¬°å…’ï¼š4å…¬åˆ† æˆ– èƒ¸å»“åšåº¦ 1/3 [cite: 30]ã€‚</li>
                    </ul>
                </li>
                <li><strong>æŒ‰å£“èˆ‡å¹æ°£æ¯”ä¾‹</strong>ï¼š
                    <ul>
                        <li>æˆäººï¼šä¸€å¾‹ <span class="highlight">30:2</span> [cite: 41]ã€‚</li>
                        <li>å…’ç«¥/å¬°å…’ï¼šå–®äºº 30:2ï¼Œ<span class="highlight">é›™äººé†«è­·æ”¹ç‚º 15:2</span> [cite: 46]ã€‚</li>
                    </ul>
                </li>
                <li><strong>èƒ¸éƒ¨å›å½ˆ</strong>ï¼šæ¯æ¬¡æŒ‰å£“é ˆå®Œå…¨å›å½ˆï¼Œä¸å¯å€šé èƒ¸å£ [cite: 25]ã€‚</li>
                <li><strong>ä¸­æ–·æ™‚é–“</strong>ï¼šæ¯ 2åˆ†é˜ (ç´„5å€‹å¾ªç’°) æª¢æŸ¥ä¸€æ¬¡å¿ƒå¾‹ï¼Œä¸­æ–·è¶ŠçŸ­è¶Šå¥½ [cite: 42, 76]ã€‚</li>
                <li><strong>äººå·¥å‘¼å¸</strong>ï¼šå¹æ°£ > 1ç§’ï¼Œè¦‹èƒ¸éƒ¨èµ·ä¼å³å¯ [cite: 46]ã€‚è‹¥å¹æ°£å¤±æ•—ï¼Œé‡æ–°æš¢é€šå‘¼å¸é“å†å¹ç¬¬äºŒå£ [cite: 173]ã€‚</li>
                <li><strong>åªç¼ºå‘¼å¸ (æœ‰è„ˆæç„¡å‘¼å¸)</strong>ï¼šçµ¦äºˆäººå·¥å‘¼å¸ï¼Œé »ç‡ç‚º <span class="highlight">æ¯6ç§’1å£æ°£</span> (æ¯åˆ†é˜10æ¬¡) [cite: 50, 55]ã€‚</li>
            </ul>
        </div>

        <div class="learning-card">
            <h3>3. è‡ªå‹•é«”å¤–å»é¡«å™¨ (AED)</h3>
            <ul>
                <li><strong>é»ƒé‡‘æ™‚é–“</strong>ï¼šé™¢å¤–ç›®æ¨™ <span class="highlight">5åˆ†é˜å…§</span>ï¼›é™¢å…§ç›®æ¨™ 3åˆ†é˜å…§ [cite: 16, 20]ã€‚</li>
                <li><strong>æ“ä½œå››æ­¥é©Ÿ</strong>ï¼šé–‹ â†’ è²¼ â†’ æ’(åˆ†æ) â†’ é›» [cite: 104]ã€‚</li>
                <li><strong>é›»æ¥µç‰‡ä½ç½® [cite: 101]</strong>ï¼š
                    <ul>
                        <li>å³é–éª¨ä¸­ç·š (èƒ¸éª¨æŸ„æ—)ã€‚</li>
                        <li>å·¦å‰è…‹ä¸­ç·š (ä¹³é ­å¤–ä¸‹æ–¹/å¿ƒå°–è™•)ã€‚</li>
                    </ul>
                </li>
                <li><strong>ç‰¹æ®Šæƒ…æ³è™•ç†</strong>ï¼š
                    <ul>
                        <li><strong>æ½®æ¿•/æººæ°´</strong>ï¼šæ“¦ä¹¾èƒ¸å‰æ°´åˆ†å†è²¼ [cite: 99]ã€‚</li>
                        <li><strong>è—¥ç‰©è²¼ç‰‡</strong>ï¼šç§»é™¤ä¸¦æ“¦æ‹­ä¹¾æ·¨ [cite: 97]ã€‚</li>
                        <li><strong>å¿ƒå¾‹èª¿ç¯€å™¨ (ICD)</strong>ï¼šé¿é–‹çªèµ·è™•ï¼›è‹¥æ­£é›»æ“Š(æŠ½å‹•)ï¼Œç­‰30-60ç§’ [cite: 137, 139]ã€‚</li>
                        <li><strong>å…’ç«¥</strong>ï¼šå„ªå…ˆç”¨å…’ç«¥è²¼ç‰‡/æ¨¡å¼ï¼Œè‹¥ç„¡å¯ç”¨æˆäººè²¼ç‰‡ [cite: 140]ã€‚</li>
                    </ul>
                </li>
                <li><strong>é›»æ“Šå¾Œè™•ç½®</strong>ï¼šé›»æ“Šå®Œ(æˆ–ä¸å»ºè­°é›»æ“Š)ï¼Œ<span class="highlight">ç«‹å³ç¹¼çºŒ CPR</span>ï¼Œä¸è¦æ‘¸è„ˆæ [cite: 114]ã€‚åšå®Œ 2åˆ†é˜å¾Œ AED æœƒå†è‡ªå‹•åˆ†æã€‚</li>
            </ul>
        </div>

        <div class="learning-card">
            <h3>4. å‘¼å¸é“ç•°ç‰©é˜»å¡ (FBAO)</h3>
            <ul>
                <li><strong>è¼•å¾®é˜»å¡</strong>ï¼šèƒ½ç™¼è²ã€å’³å—½ â†’ <span class="highlight">é¼“å‹µç”¨åŠ›å’³å—½</span> [cite: 158]ã€‚</li>
                <li><strong>åš´é‡é˜»å¡ (æ„è­˜æ¸…é†’)</strong>ï¼š
                    <ul>
                        <li>ä¸€èˆ¬æˆäºº/å…’ç«¥ï¼šå“ˆå§†ç«‹å…‹æ³• (è…¹éƒ¨æŒ‰å£“) [cite: 153]ã€‚</li>
                        <li>å­•å©¦/è‚¥èƒ–è€…ï¼š<span class="highlight">èƒ¸éƒ¨æŒ‰å£“</span> [cite: 183, 185]ã€‚</li>
                    </ul>
                </li>
                <li><strong>åš´é‡é˜»å¡ (æ„è­˜å–ªå¤±)</strong>ï¼š
                    <ul>
                        <li>ç«‹å³å¹³èººï¼Œé–‹å§‹ CPR [cite: 158]ã€‚</li>
                        <li><strong>å·®ç•°é»</strong>ï¼šæ¯æ¬¡å£“èƒ¸ 30 ä¸‹å¾Œï¼Œ<span class="highlight">å…ˆæª¢æŸ¥å£ä¸­æœ‰ç„¡ç•°ç‰©</span> (æœ‰çœ‹åˆ°æ‰æŒ–)ï¼Œå†å˜—è©¦å¹æ°£ [cite: 155]ã€‚</li>
                        <li>å£“èƒ¸æ¯”å£“è…¹æ›´èƒ½ç”¢ç”Ÿé«˜å£“æ’å‡ºç•°ç‰©ã€‚</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="learning-card">
            <h3>5. å…¶ä»–è§€å¿µèˆ‡ç¸½çµ</h3>
            <ul>
                <li><strong>ç€•æ­»å–˜æ¯ (Agonal gasps)</strong>ï¼šçœ‹ä¼¼å–˜æ°£ä½†éæ­£å¸¸å‘¼å¸ï¼Œæ‡‰è¦–ç‚ºå¿ƒè·³åœæ­¢ï¼Œ<span class="highlight">ç«‹å³ CPR</span> [cite: 43]ã€‚</li>
                <li><strong>çµ‚æ­¢ CPR æ™‚æ©Ÿ</strong>ï¼šALS ä»‹å…¥ç„¡æ•ˆä¸”èˆ‡å®¶å±¬é”æˆå…±è­˜å¾Œ [cite: 66]ã€‚</li>
            </ul>

            <span class="sub-title" style="text-align:center; margin-top:15px;">å­¸ç¿’ç¸½çµè¡¨ï¼šæˆäºº vs å…’ç«¥/å¬°å…’</span>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>é …ç›®</th>
                        <th>æˆäºº</th>
                        <th>å…’ç«¥/å¬°å…’</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æŒ‰å£“æ·±åº¦</td>
                        <td>5-6 cm</td>
                        <td>å…’ç«¥ 5cm<br>å¬°å…’ 4cm</td>
                    </tr>
                    <tr>
                        <td>æŒ‰å£“é€Ÿç‡</td>
                        <td colspan="2">100-120 æ¬¡/åˆ†</td>
                    </tr>
                    <tr>
                        <td>å–®äººæ¯”ä¾‹</td>
                        <td>30:2</td>
                        <td>30:2</td>
                    </tr>
                    <tr>
                        <td>é›™äººæ¯”ä¾‹</td>
                        <td>30:2</td>
                        <td class="highlight">15:2 (é†«è­·)</td>
                    </tr>
                    <tr>
                        <td>æ±‚æ•‘æ™‚æ©Ÿ</td>
                        <td>å…ˆæ±‚æ•‘</td>
                        <td>å…ˆ CPR 2åˆ†<br>(å–®äººç›®æ“Š)</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <button class="btn btn-home" onclick="showScreen('home-screen')">ğŸ  è¿”å›é¦–é </button>
</div>

<div class="container hidden" id="quiz-screen">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <span id="quiz-title" style="font-weight: bold; color: var(--secondary);">å–®å…ƒæ¸¬é©—</span>
        <button onclick="showScreen('home-screen')" style="background:none; border:none; color: #999; cursor: pointer;">âœ• é€€å‡º</button>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <div id="question-text" style="font-weight: bold; margin-bottom: 20px; font-size: 1.15rem; line-height: 1.4;"></div>
    <div id="options-container"></div>
    <div id="explanation" class="hidden"></div>
    <button class="btn hidden" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
</div>

<div class="container hidden" id="result-screen">
    <h2>æ¸¬é©—å®Œæˆï¼</h2>
    <div style="font-size: 3rem; font-weight: bold; color: var(--primary); margin: 20px 0;" id="final-score"></div>
    <p id="result-comment" style="text-align: center; color: #555;"></p>
    <button class="btn" onclick="location.reload()">ğŸ”„ å›åˆ°é¦–é </button>
</div>

<script src="questions.js"></script>
<script>
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let isAnswered = false;

    function showScreen(screenId) {
        document.querySelectorAll('.container').forEach(div => div.classList.add('hidden'));
        document.getElementById(screenId).classList.remove('hidden');
        window.scrollTo(0, 0);
    }

    function shuffle(array) {
        let copy = [...array];
        for (let i = copy.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
    }

    function startQuiz(unit) {
        if (unit === 'unit1') currentQuestions = shuffle(questionData.unit1);
        else if (unit === 'unit2') currentQuestions = shuffle(questionData.unit2);
        
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('quiz-title').innerText = unit === 'unit1' ? 'å–®å…ƒä¸€ï¼šåŸºç¤è§€å¿µ' : 'å–®å…ƒäºŒï¼šAEDèˆ‡æ¢—å¡';
        showScreen('quiz-screen');
        showQuestion();
    }

    function showQuestion() {
        isAnswered = false;
        const qData = currentQuestions[currentQuestionIndex];
        
        const progressPercent = ((currentQuestionIndex) / currentQuestions.length) * 100;
        document.getElementById('progress').style.width = `${progressPercent}%`;

        document.getElementById('question-text').innerText = `Q${currentQuestionIndex + 1}. ${qData.q}`;
        document.getElementById('explanation').classList.add('hidden');
        document.getElementById('next-btn').classList.add('hidden');

        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = '';

        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, qData.ans, btn);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, correctIndex, btnElement) {
        if (isAnswered) return;
        isAnswered = true;

        const options = document.querySelectorAll('.btn-option');
        if (selectedIndex === correctIndex) {
            btnElement.classList.add('correct');
            score++;
        } else {
            btnElement.classList.add('wrong');
            options[correctIndex].classList.add('correct');
        }

        const explDiv = document.getElementById('explanation');
        explDiv.innerHTML = `<strong>ğŸ’¡ è§£æï¼š</strong><br>${currentQuestions[currentQuestionIndex].note}`;
        explDiv.classList.remove('hidden');
        
        setTimeout(() => explDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 100);
        
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuestions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        showScreen('result-screen');
        document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
        
        let comment = "";
        const percentage = (score / currentQuestions.length);
        if(percentage === 1) comment = "å¤ªå¼·äº†ï¼å®Œå…¨æŒæ¡æ•‘å‘½é—œéµï¼ğŸ†";
        else if(percentage >= 0.8) comment = "å¾ˆæ£’ï¼è§€å¿µéå¸¸æ¸…æ¥šï¼ğŸ‘";
        else if(percentage >= 0.6) comment = "åŠæ ¼é‚Šç·£ï¼Œå»ºè­°å†è¤‡ç¿’ä¸€ä¸‹å–”ï¼ğŸ¤”";
        else comment = "åˆ¥ç°å¿ƒï¼Œå»ã€Œé‡é»æ•´ç†ã€å€åŠ å¼·ä¸€ä¸‹å§ï¼ğŸ’ª";
        
        document.getElementById('result-comment').innerText = comment;
    }
</script>
</body>
</html>