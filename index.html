<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLS åŸºæœ¬æ•‘å‘½è¡“å­¸ç¿’ APP</title>
    <style>
        :root { --primary: #e63946; --secondary: #457b9d; --accent: #1d3557; --bg: #f1faee; --text: #333; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { max-width: 600px; width: 100%; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1, h2, h3 { text-align: center; color: var(--accent); margin-top: 0; }
        h1 { font-size: 1.6rem; color: var(--primary); }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        .btn { display: block; width: 100%; padding: 16px; margin: 12px 0; border: none; border-radius: 12px; font-size: 1.1rem; cursor: pointer; transition: 0.2s; background: var(--secondary); color: white; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn:active { transform: scale(0.98); }
        .btn-home { background: #6c757d; }
        .btn-learn { background: #2a9d8f; } 
        
        /* é¸é …æŒ‰éˆ• */
        .btn-option { background: #f8f9fa; color: #333; border: 2px solid #e9ecef; text-align: left; font-weight: normal; }
        .btn-option:hover { border-color: var(--secondary); }
        .btn-option.correct { background: #d4edda; border-color: #28a745; color: #155724; }
        .btn-option.wrong { background: #f8d7da; border-color: #dc3545; color: #721c24; }
        
        /* å­¸ç¿’å€æ¨£å¼ */
        .learning-content { text-align: left; line-height: 1.6; }
        .learning-card { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid var(--secondary); }
        .learning-card h3 { text-align: left; color: var(--secondary); margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 5px; font-size: 1.2rem; }
        .highlight { color: #d62828; font-weight: bold; background: #fff3cd; padding: 0 4px; border-radius: 4px; }
        .sub-title { font-weight: bold; color: var(--accent); margin-top: 10px; display: block; }
        ul, ol { padding-left: 20px; margin: 5px 0; }
        li { margin-bottom: 8px; }

        /* è¡¨æ ¼æ¨£å¼ (éŸ¿æ‡‰å¼å„ªåŒ–) */
        .table-container { overflow-x: auto; }
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.85rem; min-width: 400px; }
        .comparison-table th, .comparison-table td { border: 1px solid #ddd; padding: 8px; text-align: center; vertical-align: middle; }
        .comparison-table th { background-color: var(--secondary); color: white; }
        .comparison-table tr:nth-child(even) { background-color: #f2f2f2; }
        .comparison-table .row-header { background-color: #e9ecef; font-weight: bold; width: 20%; }

        /* æµç¨‹æ­¥é©Ÿæ¨£å¼ */
        .step-box { background: white; border: 1px solid #ddd; padding: 10px; margin: 5px 0; border-radius: 5px; font-size: 0.9rem; }
        .arrow-down { text-align: center; color: #aaa; font-weight: bold; margin: -5px 0; }

        /* é€šç”¨ */
        .hidden { display: none; }
        #explanation { margin-top: 15px; padding: 15px; background: #e9ecef; border-radius: 8px; font-size: 0.95rem; line-height: 1.5; border-left: 4px solid var(--accent); }
        .progress-bar { width: 100%; height: 10px; background: #e9ecef; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--secondary); width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

<div class="container" id="home-screen">
    <h1>ğŸš‘ BLS åŸºæœ¬æ•‘å‘½è¡“<br>è¡Œå‹•å­¸ç¿’ç«™</h1>
    <p style="text-align: center; color: #666;">2020å¹´ç‰ˆæŒ‡å¼• & è¡›ç¦éƒ¨æ‘˜è¦</p>
    
    <button class="btn btn-learn" onclick="showScreen('learning-screen')">ğŸ“– å­¸ç¿’é‡é»æ­¸ç´ (å«æµç¨‹åœ–)</button>
    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
    <button class="btn" onclick="startQuiz('unit1')">ğŸ“ å–®å…ƒä¸€ï¼šåŸºç¤è§€å¿µèˆ‡ CPR</button>
    <button class="btn" onclick="startQuiz('unit2')">âš¡ å–®å…ƒäºŒï¼šAED èˆ‡ ç•°ç‰©æ¢—å¡</button>
</div>

<div class="container hidden" id="learning-screen">
    <h2>ğŸ“– BLS å­¸ç¿’é‡é»æ­¸ç´</h2>
    <div class="learning-content">
        
        <div class="learning-card">
            <h3>1. æ°‘çœ¾ç‰ˆå¿ƒè‚ºå¾©ç”¦è¡“æŒ‡å¼•æ‘˜è¦</h3>
            <div class="table-container">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th style="width:15%">é …ç›®</th>
                            <th>æˆäºº (â‰¥8æ­²)</th>
                            <th>å…’ç«¥ (1-8æ­²)</th>
                            <th>å¬°å…’ (<1æ­²)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-header">æ±‚æ•‘</td>
                            <td>å…ˆæ‰“ 119</td>
                            <td colspan="2">å…ˆæ‰“ 119<br><span class="highlight" style="font-size:0.8rem">è‹¥å–®äººç„¡æ‰‹æ©Ÿï¼šå…ˆåš5å¾ªç’°CPRå†æ±‚æ•‘</span></td>
                        </tr>
                        <tr>
                            <td class="row-header">æŒ‰å£“ä½ç½®</td>
                            <td>å…©ä¹³é ­é€£ç·šä¸­å¤®<br>(èƒ¸éª¨ä¸‹åŠæ®µ)</td>
                            <td>å…©ä¹³é ­é€£ç·šä¸­å¤®<br>(èƒ¸éª¨ä¸‹åŠæ®µ)</td>
                            <td>å…©ä¹³é ­é€£ç·š<br>ä¸­å¤®ä¹‹ä¸‹æ–¹</td>
                        </tr>
                        <tr>
                            <td class="row-header">æ·±åº¦</td>
                            <td>5 ~ 6 å…¬åˆ†</td>
                            <td>ç´„ 5 å…¬åˆ†<br>(èƒ¸åš 1/3)</td>
                            <td>ç´„ 4 å…¬åˆ†<br>(èƒ¸åš 1/3)</td>
                        </tr>
                        <tr>
                            <td class="row-header">é€Ÿç‡</td>
                            <td colspan="3">100 ~ 120 æ¬¡/åˆ†é˜</td>
                        </tr>
                        <tr>
                            <td class="row-header">æ¯”ä¾‹</td>
                            <td colspan="3">30 : 2 (å£“èƒ¸30æ¬¡ : å¹æ°£2æ¬¡)</td>
                        </tr>
                        <tr>
                            <td class="row-header">AED</td>
                            <td>æˆäººè²¼ç‰‡</td>
                            <td colspan="2">å„ªå…ˆç”¨å…’ç«¥è²¼ç‰‡<br>(ç„¡å‰‡ç”¨æˆäººè²¼ç‰‡)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-top: 5px;">*è³‡æ–™ä¾†æºï¼šè¡›ç”Ÿç¦åˆ©éƒ¨ 110å¹´4æœˆä¿®è¨‚ç‰ˆ</p>
        </div>

        <div class="learning-card">
            <h3>2. æ€¥æ•‘æµç¨‹æ­¥é©Ÿ (å«å«CD)</h3>
            
            <span class="sub-title">é€šç”¨æµç¨‹ (æ‰€æœ‰å¹´é½¡)ï¼š</span>
            <div class="step-box">1. ç¢ºèªç¾å ´å®‰å…¨</div>
            <div class="arrow-down">â†“</div>
            <div class="step-box">2. (å«) ç¢ºèªæ„è­˜ï¼šæ‹è‚©å‘¼å« (å¬°å…’æ‹è…³åº•)</div>
            <div class="arrow-down">â†“</div>
            <div class="step-box">3. (å«) å¤§è²å‘¼æ•‘ã€æ‰“119ã€å–å¾— AED<br>
            <span style="color:#666; font-size:0.85rem">â˜… æ‰‹æ©Ÿé–‹æ“´éŸ³ï¼Œå‹¿é›¢é–‹ç—…äºº</span></div>
            <div class="arrow-down">â†“</div>
            <div class="step-box">4. (C) ç¢ºèªå‘¼å¸ï¼š<br>è‹¥ç„¡å‘¼å¸æˆ–å¹¾ä¹ç„¡å‘¼å¸ (ç€•æ­»å–˜æ¯) â†’ <span class="highlight">ç«‹å³é–‹å§‹æŒ‰å£“</span></div>
            
            <span class="sub-title" style="margin-top:15px;">åˆ†æ”¯ï¼šCPR æ“ä½œç´°ç¯€</span>
            <ul>
                <li><strong>æˆäººå®Œæ•´ç‰ˆï¼š</strong>æŒ‰å£“ 30 ä¸‹ â†’ äººå·¥å‘¼å¸ 2 æ¬¡ (è‹¥å—éè¨“ç·´ä¸”æœ‰æ„é¡˜)ã€‚</li>
                <li><strong>æˆäººç°¡æ˜“ç‰ˆ (Hands-Only)ï¼š</strong>æŒçºŒèƒ¸å¤–æŒ‰å£“ä¸ä¸­æ–·ï¼Œç›´åˆ° AED åˆ°é”æˆ–æ¥æ‰‹ã€‚</li>
                <li><strong>å…’ç«¥/å¬°å…’ç‰ˆï¼š</strong>æ¯å£“ 30 æ¬¡çµ¦äºˆ 2 æ¬¡äººå·¥å‘¼å¸ (å»ºè­°åŸ·è¡Œ)ã€‚</li>
            </ul>

            <span class="sub-title" style="margin-top:15px;">5. (D) AED ä½¿ç”¨</span>
            <div class="step-box">AED åˆ°é” â†’ é–‹æ©Ÿ â†’ è²¼è²¼ç‰‡ â†’ è½æŒ‡ç¤º<br>
            <span class="highlight">é›»æ“Šå¾Œ (æˆ–ä¸å»ºè­°é›»æ“Š) â†’ ç«‹å³æ¢å¾© CPR</span></div>
        </div>

        <div class="learning-card">
            <h3>3. ç”Ÿå­˜ä¹‹éˆ (2020æ–°å¢ç¬¬å…­ç’°)</h3>
            <ol>
                <li>æ—©æœŸæ±‚æ•‘</li>
                <li>æ—©æœŸé«˜å“è³ª CPR</li>
                <li>æ—©æœŸé›»æ“Š (Defibrillation)</li>
                <li>æ—©æœŸé«˜ç´šå¿ƒè‡Ÿæ•‘å‘½è¡“</li>
                <li>å¿ƒè‡Ÿåœæ­¢å¾Œç…§è­·</li>
                <li><span class="highlight">å¾©åŸ (Recovery)</span></li>
            </ol>
        </div>

        <div class="learning-card">
            <h3>4. é«˜å“è³ª CPR äº”å¤§è¦é»</h3>
            <ul>
                <li><strong>å¿«å¿«å£“</strong>ï¼šé€Ÿç‡ 100-120 æ¬¡/åˆ†ã€‚</li>
                <li><strong>ç”¨åŠ›å£“</strong>ï¼šæˆäºº 5-6 å…¬åˆ† (å…’ç«¥/å¬°å…’ 1/3 èƒ¸åš)ã€‚</li>
                <li><strong>èƒ¸å›å½ˆ</strong>ï¼šæ¯æ¬¡æŒ‰å£“é ˆè®“èƒ¸éƒ¨å®Œå…¨å›å½ˆã€‚</li>
                <li><strong>è«ä¸­æ–·</strong>ï¼šä¸­æ–·æ™‚é–“ä¸è¶…é 10 ç§’ã€‚</li>
                <li><strong>é¿å…éåº¦é€šæ°£</strong>ï¼šå¹æ°£ 1 ç§’ï¼Œè¦‹èƒ¸èµ·ä¼å³å¯ã€‚</li>
            </ul>
        </div>

        <div class="learning-card">
            <h3>5. å‘¼å¸é“ç•°ç‰©æ¢—å¡ (FBAO)</h3>
            <ul>
                <li><strong>æ¸…é†’ (åš´é‡é˜»å¡)</strong>ï¼šå“ˆå§†ç«‹å…‹æ³• (å­•å©¦/è‚¥èƒ–è€…æ”¹èƒ¸éƒ¨æŒ‰å£“)ã€‚</li>
                <li><strong>æ˜è¿· (æ„è­˜å–ªå¤±)</strong>ï¼š
                    <ol>
                        <li>è®“ç—…äººå¹³èººã€‚</li>
                        <li><strong>é–‹å§‹ CPR</strong>ã€‚</li>
                        <li><strong>å·®ç•°é»</strong>ï¼šæ¯æ¬¡å£“èƒ¸ 30 ä¸‹å¾Œï¼Œ<span class="highlight">æª¢æŸ¥å£ä¸­æœ‰ç„¡ç•°ç‰©</span> (æœ‰çœ‹åˆ°æ‰æŒ–)ï¼Œå†å¹æ°£ã€‚</li>
                    </ol>
                </li>
            </ul>
        </div>

    </div>
    <button class="btn btn-home" onclick="showScreen('home-screen')">ğŸ  è¿”å›é¦–é </button>
</div>

<div class="container hidden" id="quiz-screen">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <span id="quiz-title" style="font-weight: bold; color: var(--secondary);">å–®å…ƒæ¸¬é©—</span>
        <button onclick="showScreen('home-screen')" style="background:none; border:none; color: #999; cursor: pointer;">âœ• é€€å‡º</button>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <div id="question-text" style="font-weight: bold; margin-bottom: 20px; font-size: 1.15rem; line-height: 1.4;"></div>
    <div id="options-container"></div>
    <div id="explanation" class="hidden"></div>
    <button class="btn hidden" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
</div>

<div class="container hidden" id="result-screen">
    <h2>æ¸¬é©—å®Œæˆï¼</h2>
    <div style="font-size: 3rem; font-weight: bold; color: var(--primary); margin: 20px 0;" id="final-score"></div>
    <p id="result-comment" style="text-align: center; color: #555;"></p>
    <button class="btn" onclick="location.reload()">ğŸ”„ å›åˆ°é¦–é </button>
</div>

<script src="questions.js"></script>
<script>
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let isAnswered = false;

    function showScreen(screenId) {
        document.querySelectorAll('.container').forEach(div => div.classList.add('hidden'));
        document.getElementById(screenId).classList.remove('hidden');
        window.scrollTo(0, 0);
    }

    function shuffle(array) {
        let copy = [...array];
        for (let i = copy.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
    }

    function startQuiz(unit) {
        if (unit === 'unit1') currentQuestions = shuffle(questionData.unit1);
        else if (unit === 'unit2') currentQuestions = shuffle(questionData.unit2);
        
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('quiz-title').innerText = unit === 'unit1' ? 'å–®å…ƒä¸€ï¼šåŸºç¤è§€å¿µ' : 'å–®å…ƒäºŒï¼šAEDèˆ‡æ¢—å¡';
        showScreen('quiz-screen');
        showQuestion();
    }

    function showQuestion() {
        isAnswered = false;
        const qData = currentQuestions[currentQuestionIndex];
        
        const progressPercent = ((currentQuestionIndex) / currentQuestions.length) * 100;
        document.getElementById('progress').style.width = `${progressPercent}%`;

        document.getElementById('question-text').innerText = `Q${currentQuestionIndex + 1}. ${qData.q}`;
        document.getElementById('explanation').classList.add('hidden');
        document.getElementById('next-btn').classList.add('hidden');

        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = '';

        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'btn btn-option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, qData.ans, btn);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, correctIndex, btnElement) {
        if (isAnswered) return;
        isAnswered = true;

        const options = document.querySelectorAll('.btn-option');
        if (selectedIndex === correctIndex) {
            btnElement.classList.add('correct');
            score++;
        } else {
            btnElement.classList.add('wrong');
            options[correctIndex].classList.add('correct');
        }

        const explDiv = document.getElementById('explanation');
        explDiv.innerHTML = `<strong>ğŸ’¡ è§£æï¼š</strong><br>${currentQuestions[currentQuestionIndex].note}`;
        explDiv.classList.remove('hidden');
        
        setTimeout(() => explDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 100);
        
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuestions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        showScreen('result-screen');
        document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
        
        let comment = "";
        const percentage = (score / currentQuestions.length);
        if(percentage === 1) comment = "å¤ªå¼·äº†ï¼å®Œå…¨æŒæ¡æ•‘å‘½é—œéµï¼ğŸ†";
        else if(percentage >= 0.8) comment = "å¾ˆæ£’ï¼è§€å¿µéå¸¸æ¸…æ¥šï¼ğŸ‘";
        else if(percentage >= 0.6) comment = "åŠæ ¼é‚Šç·£ï¼Œå»ºè­°å†è¤‡ç¿’ä¸€ä¸‹å–”ï¼ğŸ¤”";
        else comment = "åˆ¥ç°å¿ƒï¼Œå»ã€Œé‡é»æ•´ç†ã€å€åŠ å¼·ä¸€ä¸‹å§ï¼ğŸ’ª";
        
        document.getElementById('result-comment').innerText = comment;
    }
</script>
</body>
</html>